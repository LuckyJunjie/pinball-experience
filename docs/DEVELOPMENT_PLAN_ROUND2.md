# Pinball Experience - 开发计划 (Round 2)

**项目:** pinball-experience  
**版本:** 0.6+  
**日期:** 2026-03-01

---

## 📊 当前状态总结

### 已完成 (REQ-001~005)
| 需求 | 描述 | 状态 |
|------|------|------|
| REQ-001 | 发射器 + 挡板 | ✅ 100% |
| REQ-002 | 排水口 (Drain) | ✅ 100% |
| REQ-003 | 墙壁和边界 | ✅ 100% |
| REQ-004 | 障碍物 + 计分 | ✅ 100% |
| REQ-005 | 回合 + 游戏结束 | ✅ 100% |

### 开发中
| 需求 | 描述 | 状态 |
|------|------|------|
| REQ-006 | Skill shot | 🔧 40% (测试完成) |
| REQ-007 | Multiplier | 🔧 40% (测试开发中) |
| REQ-008 | Multiball | 🔧 100% (待测试验证) |

### 新需求
| 需求 | 描述 | 状态 |
|------|------|------|
| REQ-009 | Combo | 🆕 0% |
| REQ-010 | Polish | 🆕 0% |

---

## 🎯 决策: 下一个开发需求

### 推荐: REQ-009 Combo (连击系统)

**理由:**
1. **游戏性优先** - Combo 是核心得分机制，增加玩家粘性
2. **依赖清晰** - Combo 依赖已有的计分系统 (REQ-004)，实现路径明确
3. **Polish 可后续** - Polish (REQ-010) 可以在功能完成后进行优化

### REQ-009 规格 (Combo)
- 快速连续击中多个目标时触发连击
- 连击倍率: x2, x3, x4... (有上限)
- 超时重置: 2秒内无新击中则连击中断
- 视觉反馈: 连击计数器/特效

---

## 🧪 测试需求评估 (REQ-001~008)

### 需要测试验证的需求

| 需求 | 测试类型 | 优先级 | 测试负责人 |
|------|---------|--------|-----------|
| REQ-001 发射器 | 单元测试 | P1 | Nüwa |
| REQ-002 Drain | 集成测试 | P1 | Nüwa |
| REQ-003 边界 | 单元测试 | P2 | Nüwa |
| REQ-004 计分 | 单元测试 | P0 | Nüwa |
| REQ-005 游戏结束 | 集成测试 | P1 | Nüwa |
| REQ-006 Skill shot | 单元测试 | P0 | Nüwa |
| REQ-007 Multiplier | 单元+集成 | P0 | Nüwa |
| REQ-008 Multiball | 集成测试 | P0 | Nüwa |

### 测试策略
1. **优先测试 REQ-006, 007, 008** - 这些是核心得分机制
2. **CI 需先修复** - P0-07 CI 错误检查误报问题需解决
3. **自动化覆盖** - 单元测试用 Godot 测试框架，集成测试用 GDSnap

---

## 👥 任务分配

### Pangu (架构/开发)
| 任务 | 需求 | 预估时间 |
|------|------|---------|
| 完成 REQ-006 Skill shot 剩余60% | REQ-006 | 2h |
| 完成 REQ-007 Multiplier 剩余60% | REQ-007 | 3h |
| REQ-008 代码 review 和修复 | REQ-008 | 1h |
| **开发 REQ-009 Combo 系统** | REQ-009 | **4h** |

### Nüwa (测试)
| 任务 | 需求 | 预估时间 |
|------|------|---------|
| REQ-006 测试验证 | REQ-006 | 1h |
| REQ-007 测试开发 | REQ-007 | 2h |
| REQ-008 测试验证 | REQ-008 | 1h |
| CI 错误检查误报修复 (P0-07) | - | **2h** |

### Lu Ban (美术)
| 任务 | 需求 | 预估时间 |
|------|------|---------|
| Combo 视觉特效设计 | REQ-009 | 2h |
| Multiplier 指示器优化 | REQ-007 | 1h |
| Multiball 指示器检查 | REQ-008 | 1h |

### Yu (CI/CD)
| 任务 | 需求 | 预估时间 |
|------|------|---------|
| 修复 CI Console Tests 误报 (P0-07) | - | 1h |
| 优化测试报告输出 | - | 1h |
| 添加 REQ-006~009 自动化测试到 CI | - | 2h |

---

## 📅 开发计划

### Sprint 2 (Week 1-2)

| Day | Pangu | Nüwa | Lu Ban | Yu |
|-----|-------|------|--------|-----|
| Day 1 | REQ-006 收尾 | REQ-006 测试验证 | Multiplier 指示器 | CI 误报修复 |
| Day 2 | REQ-007 开发 | REQ-007 测试开发 | - | 优化测试报告 |
| Day 3 | REQ-007 开发 | REQ-007 测试验证 | Combo 视觉设计 | - |
| Day 4 | REQ-008 Review | REQ-008 测试验证 | Combo 视觉设计 | 添加 REQ 测试到 CI |
| Day 5 | **REQ-009 开发启动** | 回归测试 | - | - |

### Sprint 3 (Week 3-4)
- REQ-009 Combo 完整开发
- REQ-010 Polish 启动 (性能优化、音效、UI 微调)

---

## ⚠️ 风险与依赖

1. **CI 阻塞** - P0-07 需优先解决，否则测试无法验证
2. **测试环境** - 需确认 Godot 4.5.1 可用
3. **REQ-009 规格** - 需明确 Combo 触发条件和上限

---

## ✅ 下一步行动

1. **立即**: Yu 修复 CI 误报 (P0-07)
2. **立即**: Nüwa 验证 REQ-006 测试
3. **Day 2**: Pangu 完成 REQ-007 开发
4. **Day 5**: 启动 REQ-009 Combo 开发

---

*文档生成时间: 2026-03-01 17:00 GMT+8*
